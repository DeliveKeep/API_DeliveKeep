openapi: 3.0.3
info:
  title: Delive Keep API
  version: 1.0.0
  description: REST API built with Go.
servers:
  - url: http://localhost:5000
    description: Servidor local de desenvolvimento
paths:
  /clientes/login:
    post:
      summary: Login cliente
      description: Verifica dados e retorna ou não token e id do logado
      tags:
        - Clientes
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/login/login_req_body.yaml'
      responses:
        '200':
          description: Login efetuado com sucesso
          content:
            application/json:
              schema:
                $ref: './components/schemas/login/login_res.yaml' 
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large.
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: campos faltando
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário com esse email não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: senha incorreta
  /clientes:
    post:
      summary: Cadastrar cliente
      description: Cadastra um novo cliente e retorna seus dados
      tags:
        - Clientes
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/usuarios/cadastrar_usuario_req_body.yaml'
      responses:
        '201':
          description: Usuário criado
          content:
            application/json:
              schema:
                $ref: './components/schemas/usuarios/cadastrar_usuario_res.yaml'
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large.
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: algum campo no formato inválido ou com poucos caracteres
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor
    get:
      summary: Listar clientes
      description: Lista todos clientes cadastrados
      tags:
        - Clientes
      responses:
        '200':
          description: Clientes listados
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: './components/schemas/usuarios/nao_sensiveis.yaml'
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor
  /clientes/me:
    get:
      summary: Buscar cliente logado
      description: Busca dados exceto a senha do cliente logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Clientes
      responses:
        '200':
          description: Dados do cliente buscados
          content:
            application/json:
              schema:
                $ref: './components/schemas/usuarios/nao_sensiveis.yaml'
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
    delete:
      summary: Deletar cliente logado
      description: Deleta dados do cliente logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Clientes
      responses:
        '204':
          description: cliente deletado (sem conteúdo)
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
  /clientes/{id}:
    get:
      summary: Buscar cliente por id
      description: Busca dados exceto a senha de um cliente por id
      parameters:
        - $ref: './components/parameters/jwt.yaml'
        - $ref: './components/parameters/id_usuario.yaml'
      tags:
        - Clientes
      responses:
        '200':
          description: Dados do cliente buscados
          content:
            application/json:
              schema:
                $ref: './components/schemas/usuarios/nao_sensiveis.yaml'
        '404':
          description: Não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
  /clientes/nome:
    patch:
      summary: Atualizar nome do cliente
      description: Atualiza nome do cliente logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Clientes
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nome:
                  type: string
              required:
                - nome
      responses:
        '204':
          description: nome atualizado
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: nome com menos de 2 caracteres
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado para atualizar dados
  /clientes/endereco:
    patch:
      summary: Atualizar endereco do cliente
      description: Atualiza endereco do cliente logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Clientes
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                endereco:
                  type: string
              required:
                - endereco
      responses:
        '204':
          description: endereco atualizado
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado para atualizar dados
  /clientes/telefone:
    patch:
      summary: Atualizar telefone do cliente
      description: Atualiza telefone do cliente logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Clientes
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                telefone:
                  type: string
              required:
                - telefone
      responses:
        '204':
          description: telefone atualizado
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado para atualizar dados
  /clientes/email:
    patch:
      summary: Atualizar email do cliente
      description: Atualiza email do cliente logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Clientes
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
              required:
                - email
      responses:
        '204':
          description: email atualizado
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: email inválido
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado para atualizar dados
  /clientes/senha:
    patch:
      summary: Atualizar senha
      description: Atualiza a senha do cliente logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Clientes
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/usuarios/atualizar_senha_req_body.yaml'
      responses:
        '204':
          description: Senha atualizada com sucesso
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: senha deve ter pelo menos 2 caracteres
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: senha atual incorreta
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado para atualizar dados
  /galpoes:
    post:
      summary: Criar Galpão
      description: Cria um galpão
      tags:
        - Galpões
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/galpoes/criar_galpao_req_body.yaml'
      responses:
        '200':
          description: Galpão criado
          content:
            application/json:
              schema:
                $ref: './components/schemas/galpoes/criar_galpao_res.yaml' 
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large.
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: campos faltando
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor de banco de dados
    get:
      summary: Listar galpões
      description: Lista todos galpões cadastrados
      tags:
        - Galpões
      responses:
        '200':
          description: Galpões listados
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: './components/schemas/galpoes/criar_galpao_res.yaml'
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor
  /galpoes/{id}:
    get:
      summary: Buscar galpão por id
      description: Busca dados de um galpão pelo id
      parameters:
        - $ref: './components/parameters/id_galpao.yaml'
      tags:
        - Galpões
      responses:
        '200':
          description: Dados do galpão buscados
          content:
            application/json:
              schema:
                $ref: './components/schemas/galpoes/criar_galpao_res.yaml'
        '404':
          description: Não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
    put:
      summary: Atualizar galpão
      description: Atualiza nome e ou endereço de um galpão
      parameters:
        - $ref: './components/parameters/jwt.yaml'
        - $ref: './components/parameters/id_galpao.yaml'
      tags:
        - Galpões
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/galpoes/criar_galpao_req_body.yaml'
      responses:
        '204':
          description: Galpão atualizado
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large.
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: campos faltando
        '404':
          description: Não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '403':
          description: Proibido
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: permissao negada, apenas administradores podem fazer essa ação
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor de banco de dados
  /operadores/login:
    post:
      summary: Login operador
      description: Verifica dados e retorna ou não token e id do logado
      tags:
        - Operadores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/login/login_req_body.yaml'
      responses:
        '200':
          description: Login efetuado com sucesso
          content:
            application/json:
              schema:
                $ref: './components/schemas/login/login_res.yaml' 
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large.
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: campos faltando
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário com esse email não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: senha incorreta
  /operadores:
    post:
      summary: Cadastrar operador
      description: Cadastra um novo operador e retorna seus dados
      tags:
        - Operadores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/operadores/cadastrar_operador_req_body.yaml'
      responses:
        '201':
          description: Usuário criado
          content:
            application/json:
              schema:
                $ref: './components/schemas/operadores/cadastrar_operador_res.yaml'
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large.
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: algum campo no formato inválido ou com poucos caracteres
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor
    get:
      summary: Listar operadores
      description: Lista todos operadores cadastrados
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Operadores
      responses:
        '200':
          description: Operadores listados
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: './components/schemas/operadores/nao_sensiveis.yaml'
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor
  /operadores/me:
    get:
      summary: Buscar operador logado
      description: Busca dados exceto a senha do operador logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Operadores
      responses:
        '200':
          description: Dados do operador buscados
          content:
            application/json:
              schema:
                $ref: './components/schemas/operadores/nao_sensiveis.yaml'
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
    delete:
      summary: Deletar operador logado
      description: Deleta dados do operador logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Operadores
      responses:
        '204':
          description: operador deletado (sem conteúdo)
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
  /operadores/{id}:
    get:
      summary: Buscar operador por id
      description: Busca dados exceto a senha de um operador por id
      parameters:
        - $ref: './components/parameters/jwt.yaml'
        - $ref: './components/parameters/id_usuario.yaml'
      tags:
        - Operadores
      responses:
        '200':
          description: Dados do operador buscados
          content:
            application/json:
              schema:
                $ref: './components/schemas/operadores/nao_sensiveis.yaml'
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '404':
          description: Não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
  /operadores/nome:
    patch:
      summary: Atualizar nome do operador
      description: Atualiza nome do operador logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Operadores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nome:
                  type: string
              required:
                - nome
      responses:
        '204':
          description: nome atualizado
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: nome com menos de 2 caracteres
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado para atualizar dados
  /operadores/telefone:
    patch:
      summary: Atualizar telefone do operador
      description: Atualiza telefone do operador logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Operadores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                telefone:
                  type: string
              required:
                - telefone
      responses:
        '204':
          description: telefone atualizado
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado para atualizar dados
  /operadores/email:
    patch:
      summary: Atualizar email do operador
      description: Atualiza email do operador logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Operadores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
              required:
                - email
      responses:
        '204':
          description: email atualizado
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: email inválido
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado para atualizar dados
  /operadores/senha:
    patch:
      summary: Atualizar senha
      description: Atualiza a senha do operador logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Operadores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/usuarios/atualizar_senha_req_body.yaml'
      responses:
        '204':
          description: Senha atualizada com sucesso
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: senha deve ter pelo menos 2 caracteres
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: senha atual incorreta
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado para atualizar dados
  /administradores/login:
    post:
      summary: Login administrador
      description: Verifica dados e retorna ou não token e id do logado
      tags:
        - Administradores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/login/login_req_body.yaml'
      responses:
        '200':
          description: Login efetuado com sucesso
          content:
            application/json:
              schema:
                $ref: './components/schemas/login/login_res.yaml' 
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large.
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: campos faltando
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário com esse email não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: senha incorreta
  /administradores:
    post:
      summary: Cadastrar administrador
      description: Cadastra um novo administrador e retorna seus dados
      tags:
        - Administradores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/operadores/cadastrar_operador_req_body.yaml'
      responses:
        '201':
          description: Usuário criado
          content:
            application/json:
              schema:
                $ref: './components/schemas/operadores/cadastrar_operador_res.yaml'
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large.
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: algum campo no formato inválido ou com poucos caracteres
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor
    get:
      summary: Listar administradores
      description: Lista todos administradores cadastrados
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Administradores
      responses:
        '200':
          description: Administradores listados
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: './components/schemas/operadores/nao_sensiveis.yaml'
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor
  /administradores/me:
    get:
      summary: Buscar administrador logado
      description: Busca dados exceto a senha do administrador logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Administradores
      responses:
        '200':
          description: Dados do administrador buscados
          content:
            application/json:
              schema:
                $ref: './components/schemas/operadores/nao_sensiveis.yaml'
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
    delete:
      summary: Deletar administrador logado
      description: Deleta dados do administrador logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Administradores
      responses:
        '204':
          description: administrador deletado (sem conteúdo)
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
  /administradores/{id}:
    get:
      summary: Buscar administrador por id
      description: Busca dados exceto a senha de um administrador por id
      parameters:
        - $ref: './components/parameters/jwt.yaml'
        - $ref: './components/parameters/id_usuario.yaml'
      tags:
        - Administradores
      responses:
        '200':
          description: Dados do administrador buscados
          content:
            application/json:
              schema:
                $ref: './components/schemas/operadores/nao_sensiveis.yaml'
        '404':
          description: Não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
  /administradores/nome:
    patch:
      summary: Atualizar nome do administrador
      description: Atualiza nome do administrador logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Administradores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nome:
                  type: string
              required:
                - nome
      responses:
        '204':
          description: nome atualizado
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: nome com menos de 2 caracteres
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado para atualizar dados
  /administradores/telefone:
    patch:
      summary: Atualizar telefone do administrador
      description: Atualiza telefone do administrador logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Administradores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                telefone:
                  type: string
              required:
                - telefone
      responses:
        '204':
          description: telefone atualizado
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado para atualizar dados
  /administradores/email:
    patch:
      summary: Atualizar email do administrador
      description: Atualiza email do administrador logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Administradores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
              required:
                - email
      responses:
        '204':
          description: email atualizado
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: email inválido
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado para atualizar dados
  /administradores/senha:
    patch:
      summary: Atualizar senha
      description: Atualiza a senha do administrador logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Administradores
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/usuarios/atualizar_senha_req_body.yaml'
      responses:
        '204':
          description: Senha atualizada com sucesso
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: senha deve ter pelo menos 2 caracteres
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: senha atual incorreta
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário não encontrado para atualizar dados
  /encomendas:
    post:
      summary: Criar encomenda
      description: Cria uma encomenda
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Encomendas
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/encomendas/criar_encomenda_req_body.yaml'
      responses:
        '200':
          description: Encomenda criada
          content:
            application/json:
              schema:
                $ref: './components/schemas/encomendas/criar_encomenda_res.yaml' 
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large.
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: campos faltando
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token ausente ou inválido
        '403':
          description: Proibido
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: permissao negada, somente operadores e administradores podem executar essa ação
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: usuário com esse email não encontrado
  /encomendas/{id}:
    get:
      summary: Buscar encomenda por id
      description: Busca dados de uma encomenda por id
      parameters:
        - $ref: './components/parameters/jwt.yaml'
        - $ref: './components/parameters/id_encomenda.yaml'
      tags:
        - Encomendas
      responses:
        '200':
          description: Dados da encomenda buscados
          content:
            application/json:
              schema:
                $ref: './components/schemas/encomendas/criar_encomenda_res.yaml'
        '404':
          description: Não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
    put:
      summary: Atualizar encomenda
      description: Atualiza dados de uma encomenda
      parameters:
        - $ref: './components/parameters/jwt.yaml'
        - $ref: './components/parameters/id_encomenda.yaml'
      tags:
        - Encomendas
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/encomendas/criar_encomenda_req_body.yaml'
      responses:
        '204':
          description: Encomenda atualizada
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large.
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: campos faltando
        '404':
          description: Não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '403':
          description: Proibido
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: permissao negada, apenas administradores podem fazer essa ação
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor de banco de dados
  /encomendas/cliente:
    get:
      summary: Listar encomendas do cliente logado
      description: Lista todas encomendas do cliente logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Encomendas
      responses:
        '200':
          description: Encomendas listadas
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: './components/schemas/encomendas/criar_encomenda_res.yaml'
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor
  /encomendas/galpao:
    get:
      summary: Listar encomendas do galpao
      description: Lista todas encomendas do galpao onde o usário logado trabalha
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Encomendas
      responses:
        '200':
          description: Encomendas listadas
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: './components/schemas/encomendas/criar_encomenda_res.yaml'
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '403':
          description: Proibido
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: permissao negada, apenas administradores podem fazer essa ação
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor
  /notificacoes:
    get:
      summary: Listar notificacoes do cliente logado
      description: Lista todas notificacoes do cliente logado
      parameters:
        - $ref: './components/parameters/jwt.yaml'
      tags:
        - Notificacoes
      responses:
        '200':
          description: Notificacoes listados
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: './components/schemas/notificacoes/notificacoes.yaml'
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor
  /encomendas/atualizar-status/{id}:
    put:
      summary: Atualizar status de uma encomenda
      description: Atualiza status de uma encomenda com determinado id
      parameters:
        - $ref: './components/parameters/jwt.yaml'
        - $ref: './components/parameters/id_encomenda.yaml'
      tags:
        - Encomendas
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: './components/schemas/encomendas/atualizar_status_req_body.yaml'
      responses:
        '204':
          description: Status atualizado
        '422':
          description: Entidade não processável
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: request body too large.
        '400':
          description: Requisição mal feita
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: campos faltando
        '404':
          description: Não encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: id não encontrado
        '401':
          description: Não autorizado
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: token faltando no cabeçalho
        '403':
          description: Proibido
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: permissao negada, apenas administradorese e operadores podem fazer essa ação
        '500':
          description: Erro no servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  erro:
                    type: string
                    example: erro no servidor de banco de dados